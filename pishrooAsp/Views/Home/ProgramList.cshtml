@* Components/Products/Luxury.cshtml *@
@model List<ProductViewModel>

<section class="luxury-products py-20 bg-gradient-to-br from-blue-50 to-indigo-50">
    <div class="container mx-auto px-4">
        <!-- هدر لوکس -->
        <div class="text-center mb-16">
            <div class="inline-flex items-center justify-center w-20 h-20 bg-blue-600 rounded-full mb-6">
                <i class="fas fa-gem text-2xl text-white"></i>
            </div>

            @{
                // تشخیص زبان به صورت ایمن
                var currentLanguage = "fa"; // زبان پیش‌فرض
                if (Model != null && Model.Any() && !string.IsNullOrEmpty(Model[0].Language))
                {
                    currentLanguage = Model[0].Language.ToLower();
                }
                else
                {
                    // استفاده از ViewBag یا RouteData اگر موجود باشد
                    currentLanguage = ViewBag.lang?.ToLower() ?? "fa";
                }
            }

            @if (currentLanguage == "fa")
            {
                <h2 class="text-5xl font-black text-blue-800 mb-4">محصولات پلیمری</h2>
                <div class="w-32 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mx-auto mb-4"></div>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">تولید تی پی ای (TPE)، تی پی وی (TPV)، اس بی اس (SBS)، اس بی ای اس (SBS)، شور، سافت تاچ، کامپاند، الاستومر، پلی پروپیلن، پلی اتیلن، همو پلیمر و کو پلیمر با استانداردهای بین‌المللی</p>
            }
            else
            {
                <h2 class="text-5xl font-black text-blue-800 mb-4">Polymer Products</h2>
                <div class="w-32 h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mx-auto mb-4"></div>
                <p class="text-xl text-gray-600 max-w-2xl mx-auto">Production of TPE, TPV, SBS, SEBS, Shore, Soft Touch, Compound, Elastomer, Polypropylene, Polyethylene, Homo Polymer and Co Polymer with international standards</p>
            }
        </div>

        <!-- محصولات با کارت‌های لوکس -->
        @if (Model != null && Model.Any())
        {
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                @foreach (var product in Model)
                {
                    <div class="luxury-card group" data-language="@product.Language">
                        <!-- کارت محصول -->
                        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden border border-white/20 backdrop-blur-sm">
                            <!-- هدر کارت -->
                            <div class="relative overflow-hidden h-56">
                                <img src="@(product.ImageUrl ?? "/images/default-luxury-product.jpg")"
                                     alt="@(product.Title ?? "Product")"
                                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                                    >
                                <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
                                <div class="absolute top-4 right-4">
                                    <span class="bg-blue-600/90 text-white px-3 py-1 rounded-full text-xs font-bold backdrop-blur-sm">
                                        @(product.Language?.ToUpper() ?? "FA")
                                    </span>
                                </div>
                                <div class="absolute bottom-4 right-4">
                                    <span class="bg-green-500/90 text-white px-3 py-1 rounded-full text-xs font-bold backdrop-blur-sm">
                                        <i class="fas fa-star mr-1"></i>
                                        @(currentLanguage == "fa" ? "پریمیوم" : "Premium")
                                    </span>
                                </div>
                            </div>

                            <!-- بدنه کارت -->
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-800 mb-3 leading-tight">@(product.Title ?? "بدون عنوان")</h3>

                                <!-- اکشن‌های کارت -->
                                <div class="flex items-center justify-between">
                                    

                                    
                                    <a asp-controller="Products"
                                       asp-action="@product.seoWord?.Split(',')?[0]?.Trim()"
                                       class="flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 flex items-center justify-center group/btn mr-3">
                                        @(currentLanguage == "fa" ? "مشاهده" : "View")
                                        <i class="fas fa-arrow-left mr-2 group-hover/btn:-translate-x-1 transition-transform"></i>

                                    </a>
                                    <button class="w-12 h-12 bg-gray-100 hover:bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center transition-all duration-300 group/fav">
                                        <i class="far fa-heart group-hover/fav:scale-110"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }

        <!-- حالت خالی لوکس -->
        @if (Model == null || !Model.Any())
        {
            <div class="text-center py-20">
                <div class="w-32 h-32 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-box-open text-5xl text-blue-600"></i>
                </div>
                <h3 class="text-3xl font-bold text-gray-700 mb-4">@(currentLanguage == "fa" ? "محصولی یافت نشد" : "No Products Found")</h3>
                <p class="text-gray-500 text-lg mb-6">@(currentLanguage == "fa" ? "در حال حاضر هیچ محصولی برای نمایش وجود ندارد" : "There are currently no products to display")</p>
                <button class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
                    <i class="fas fa-sync-alt ml-2"></i>
                    @(currentLanguage == "fa" ? "بارگذاری مجدد" : "Reload")
                </button>
            </div>
        }

    </div>
</section>
@{
    var advancedSchema = new
    {
        context = "https://schema.org",
        type = "ItemList",
        name = currentLanguage == "fa" ? "محصولات پلیمری تی پی ای، تی پی وی، اس بی اس" : "Polymer Products TPE, TPV, SBS",
        description = currentLanguage == "fa" ?
        "تولید تی پی ای (TPE)، تی پی وی (TPV)، اس بی اس (SBS)، اس بی ای اس (SEBS)، شور، سافت تاچ، کامپاند پلیمری، الاستومر، پلی پروپیلن، پلی اتیلن، همو پلیمر و کو پلیمر" :
        "Production of TPE, TPV, SBS, SEBS, Shore, Soft Touch, Polymer Compound, Elastomer, Polypropylene, Polyethylene, Homo Polymer and Co Polymer",
        url = $"https://arvinpolymer.com/{(currentLanguage == "en" ? "en/" : "")}products",
        numberOfItems = Model.Count,
        mainEntityOfPage = new
        {
            type = "CollectionPage",
            id = $"https://arvinpolymer.com/{(currentLanguage == "en" ? "en/" : "")}products"
        },
        itemListElement = Model.Select((product, index) => new
        {
            type = "ListItem",
            position = index + 1,
            item = new
            {
                type = "Product",
                id = $"https://arvinpolymer.com/{(currentLanguage == "fa" ? "fa/" : "en/")}products/{product.seoWord?.Split(',')?[0]?.Trim()}",
                name = product.Title,
                description = product.Title,
                image = product.ImageUrl ?? "/images/default-luxury-product.jpg",
                sku = product.Id.ToString() ?? $"AP-{index + 1}",
                brand = new
                {
                    type = "Brand",
                    name = currentLanguage == "fa" ? "آروین پلیمر" : "Arvin Polymer",
                    logo = "https://arvinpolymer.com/images/companyLogo.png",
                    url = "https://arvinpolymer.com"
                },
                manufacturer = new
                {
                    type = "Organization",
                    name = currentLanguage == "fa" ? "آروین پلیمر" : "Arvin Polymer",
                    url = "https://arvinpolymer.com"
                },
                category = currentLanguage == "fa" ? "مواد پلیمری صنعتی" : "Industrial Polymer Materials",
                offers = new
                {
                    type = "Offer",
                    url = $"https://arvinpolymer.com/{(currentLanguage == "fa" ? "fa/" : "en/")}products/{product.seoWord?.Split(',')?[0]?.Trim()}",
                    priceCurrency = "IRR",
                    price = "0",
                    priceValidUntil = DateTime.Now.AddYears(1).ToString("yyyy-MM-dd"),
                    availability = "https://schema.org/InStock",
                    itemCondition = "https://schema.org/NewCondition",
                    seller = new
                    {
                        type = "Organization",
                        name = currentLanguage == "fa" ? "آروین پلیمر" : "Arvin Polymer",
                        url = "https://arvinpolymer.com"
                    }
                },
                aggregateRating = new
                {
                    type = "AggregateRating",
                    ratingValue = "4.8",
                    bestRating = "5",
                    worstRating = "1",
                    ratingCount = "150"
                },
                additionalProperty = new[]
                {
                    new
                    {
                        type = "PropertyValue",
                        name = currentLanguage == "fa" ? "استاندارد کیفیت" : "Quality Standard",
                        value = currentLanguage == "fa" ? "ISO 9001" : "ISO 9001"
                    },
                    new
                    {
                        type = "PropertyValue",
                        name = currentLanguage == "fa" ? "نوع پلیمر" : "Polymer Type",
                        value = currentLanguage == "fa" ? "صنعتی" : "Industrial"
                    }
                }
            }
        }).ToArray(),
        publisher = new
        {
            type = "Organization",
            name = currentLanguage == "fa" ? "آروین پلیمر" : "Arvin Polymer",
            description = currentLanguage == "fa" ?
                "شرکت پیشرو در تولید محصولات پلیمری با کیفیت" :
                "Leading company in production of high quality polymer products",
            url = "https://arvinpolymer.com",
            logo = "https://arvinpolymer.com/images/companyLogo.png",
            address = new
            {
                type = "PostalAddress",
                addressCountry = "IR",
                addressLocality = currentLanguage == "fa" ? "تهران" : "Tehran",
                addressRegion = currentLanguage == "fa" ? "تهران" : "Tehran"
            },
            contactPoint = new
            {
                type = "ContactPoint",
                telephone = "+98-912-363-3723",
                contactType = "customer service",
                areaServed = "IR",
                availableLanguage = new[] { "fa", "en" }
            }
        }
    };
}

<script type="application/ld+json">
    @Html.Raw(Json.Serialize(advancedSchema))
</script>